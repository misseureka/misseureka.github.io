<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>   
</head>
<body>
	<h1>
        <a href="/click1.html">Click me!</a>    
        <a href="https://misseureka.github.io/click2.html">No, click me! I'm better!</a>   
    </h1>
</body>

<script>
	(function() {     
        var REDIRECT_URL = 'https://hz-test1.rutarget.ru/redirect';        
        var rtgtRedirect = false; 

        var getParent = function(el, parent){
        	return parent === el.nodeName.toLowerCase() ? el : el.parentElement ? getParent(el.parentElement) : null;
        }

        var redirect = {
        	getLink: function(link){
                return REDIRECT_URL + "?url=" + link;
        	},
        	clickListener: function(e){
        		if (!e.defaultPrevented) {
                    var link = getParent(e.target, 'a');
                    if (link) {
                    	var h = link.href;
                    	link.href = redirect.getLink(link.href); 
                    	setTimeout(function() {
                            link.href = h;
                        }, 0);
                    }
                }
        	}
        }
        
    	rtgtRedirect = true;
        window.top.addEventListener('click', redirect.clickListener, false);       
   
	})();
</script>
</html>